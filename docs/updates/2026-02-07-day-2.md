# Daily Log — 2026-02-07

## Summary
Today we set up the base for running services on our Ubuntu Server by installing Docker + Docker Compose, then deployed two initial services using Docker Compose:

- **Uptime Kuma** (service monitoring / uptime checks)
- **Homepage** (dashboard to link to services)

This gives us a working foundation for adding more homelab services later while keeping deployments repeatable.

---

## What we did

### 1) Installed Docker Engine + Docker Compose
- Installed Docker Engine on Ubuntu Server using the official Docker instructions.
- Verified Docker is running and that `docker compose` is available.
- (Optional / recommended) configured Docker so we can run it without `sudo`.

Result: We can now run containerized services consistently with Compose files.

---

### 2) Created a consistent directory structure for Compose stacks
We standardized where app stacks live so everything is easy to find and back up.

Current structure:
- `/srv/compose/uptime-kuma`
- `/srv/compose/homepage`

Each stack contains:
- a `compose.yml`
- a persistent data/config folder (e.g. `data/` or `config/`)

---

### 3) Deployed Uptime Kuma
- Created the Uptime Kuma Compose stack in `/srv/compose/uptime-kuma`.
- Mapped port **3001** and added a persistent volume so the database survives updates/restarts.
- Started it with `docker compose up -d`.
- Confirmed we can access the UI over Tailscale at:

`http://<server-tailscale-ip>:3001`

Result: We have a monitoring tool ready to track homelab services as we add them.

---

### 4) Deployed Homepage (dashboard)
- Created the Homepage Compose stack in `/srv/compose/homepage`.
- Mapped port **3000** and mounted `./config` to store configuration.
- Mounted `/var/run/docker.sock` read-only so Homepage can optionally display Docker status widgets.
- Started it with `docker compose up -d`.

Access:
`http://<server-tailscale-ip>:3000`

#### Fix applied: Host validation
When first accessing Homepage, it displayed:

> Host validation failed

The container logs indicated Homepage required the `HOMEPAGE_ALLOWED_HOSTS` environment variable, including the **host:port** format.

We fixed this by adding an environment variable in the Homepage `compose.yml` similar to:

- `HOMEPAGE_ALLOWED_HOSTS=<server-tailscale-ip>:3000,127.0.0.1:3000,localhost:3000`

Then we recreated the container to apply the change.

Result: Homepage loads properly over Tailscale and can act as our central landing page.

---

## Notes / Decisions
- We are keeping things **simple** for now: no reverse proxy (Caddy), no custom domains, no HTTPS configuration yet.
- Access is primarily via **Tailscale IP + port**, which is secure and avoids router/port-forwarding complexity.
- Compose-first approach means we can document and reproduce services reliably.

---

## Next steps (planned)
- Add links/widgets to Homepage for current services.
✅ Add monitors in Uptime Kuma for:
  - Homepage (`http://<server-tailscale-ip>:3000`)
  - Uptime Kuma self-check (`http://<server-tailscale-ip>:3001`)
- Choose the next service to deploy (candidate: AdGuard Home for network ad-blocking).

---

## Sources / References
- Docker Engine install (Ubuntu): https://docs.docker.com/engine/install/ubuntu/
- Docker Compose overview: https://docs.docker.com/compose/
- Uptime Kuma (project repository/docs): https://github.com/louislam/uptime-kuma
- Homepage (project docs): https://gethomepage.dev/
